# Java Protocol Example
Example is a simple address book application that can read and write people's contact details to and from a file. <br>

## Defining the Protocl Format
```
syntax = "proto3";

package tutorial;

option java_package = "com.example.tutorial"; // Specify the java output package
option java_outer_classname = "AddressBookProtos"; // The java file name

message Person {
    required string name = 1;
    required int32 id = 2;
    optional string email = 3;

    enum PhoneType{
        MOBILE = 0;
        HOME = 1;
        WORK = 2;
    }

    message PhoneNumber {
        required string number = 1;
        optional PhoneType type = 2 [default = HOME];
    }

    repeated PhoneNumber phones = 4;
}

message AddressBook {
    repeated Person people = 1;
}
```

## The Protocol Buffer API
Each class has its own Builder class you use to create instances of that class.

## Builders vs Messages
**Messages**<br>
The message classes generated by the protocol buffer compiler are all immutable. Once a message object is constructed, it cannot be modified, just like a Java String. **To construct a message**, you must first construct a builder, set any fields you want to set to your chosen values, then call the builder's build() method. <br>
Below would be the code on how to create a Person message
```
Person john =
  Person.newBuilder()
    .setId(1234)
    .setName("John Doe")
    .setEmail("jdoe@example.com")
    .addPhones(
      Person.PhoneNumber.newBuilder()
        .setNumber("555-4321")
        .setType(Person.PhoneType.HOME))
    .build();
```
**Standard Message Methods Include**
* isInitialized(): Checks if all the required fields have been set
* toString(): Returns a human-readable representation of the message, useful for debugging
* mergeFrom(Message other), BUILDER ONLY: Merges the content of other into this message, overwritting singular scalar fields, merging composite fields, and concatenating repeated fields.
* clear(), BUILDER ONLY: Clears all the fields back to the empty state

## Parsing and Serializing
Each protocol buffer class has methods for writting and reading messages of your chosen type using the protocol buffer binary format.
* byte[] toByteArray(); : Serializes the message and returns a byte array containing its raw bytes
* static Person parseFrom(byte[] data); : Parses a message from the given byte array
* void writeTo(OuputStream output); : Serializes the message and writes to an OutputStream
* static Person parseFrom(InputStream input); : Reads and parses a message from an InputStream